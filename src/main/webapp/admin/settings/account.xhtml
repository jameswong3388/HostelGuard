<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/templates/layouts/admin-layout.xhtml">

    <!-- Keep your other <ui:define> blocks for title, navigation, etc. -->
    <ui:define name="title">Account Settings - HostelGuardâ„¢</ui:define>

    <!-- Navigation links -->
    <ui:define name="navigation">
        <h:link outcome="/admin/settings/general.xhtml"
                styleClass="py-2 text-gray-500 hover:text-gray-700 focus:outline-none">
            General
        </h:link>
        <h:link outcome="/admin/settings/account.xhtml"
                styleClass="py-2 text-blue-600 font-medium focus:outline-none">
            Account
        </h:link>
        <h:link outcome="/admin/settings/authentication-security.xhtml"
                styleClass="py-2 text-gray-500 hover:text-gray-700 focus:outline-none">
            Authentication &amp; Security
        </h:link>
    </ui:define>

    <!-- Replace only the content block with the new design -->
    <ui:define name="content">
        <div class="space-y-10">
            <!-- Change Username Section (replaces Personal Information Section) -->
            <section aria-labelledby="change-username">
                <h:form>
                    <div class="grid grid-cols-1 gap-x-14 gap-y-8 md:grid-cols-3">
                        <div>
                            <h2 id="change-username" class="scroll-mt-10 font-semibold text-gray-900">
                                Change Username
                            </h2>
                            <p class="mt-1 text-sm leading-6 text-gray-500">
                                Changing your username can have unintended side effects.
                                <a href="#"
                                   class="inline-flex items-center gap-1 text-indigo-600 hover:underline hover:underline-offset-4">
                                    Learn more
                                    <i class="pi pi-external-link size-4 shrink-0" aria-hidden="true"/>
                                </a>
                            </p>
                            <p class="mt-1 text-sm leading-6 text-gray-500">
                                Looking to manage account security settings?
                                You can find them in the
                                <a href="http://localhost:8080/HVVS-1.0-SNAPSHOT/resident/settings/authentication-security.xhtml"
                                   class="text-indigo-600 hover:underline hover:underline-offset-4">
                                    Authentication &amp; Security
                                </a>
                                page.
                            </p>
                        </div>

                        <div class="md:col-span-2">
                            <div class="grid grid-cols-1 gap-4 sm:grid-cols-6">
                                <!-- Username -->
                                <div class="col-span-full sm:col-span-3">
                                    <h:outputLabel for="username" value="Username" styleClass="font-medium"/>
                                    <p:inputText id="username"
                                                 value="#{SettingsController.user.username}"
                                                 placeholder="Enter new username"
                                                 styleClass="mt-2 w-full"/>
                                </div>

                                <!-- Update Username Button -->
                                <div class="col-span-full mt-6 flex justify-end">
                                    <p:commandButton value="Change username"
                                                     action="#{SettingsController.updateUsername}"
                                                     update="@form messages"
                                                     styleClass="p-button-raised p-button-primary"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </section>

            <!-- Divider -->
            <hr class="border-gray-300"/>

            <!-- Danger Zone Section -->
            <section aria-labelledby="danger-zone">
                <h:form>
                    <div class="grid grid-cols-1 gap-x-14 gap-y-8 md:grid-cols-3">
                        <div>
                            <h2 id="danger-zone"
                                class="scroll-mt-10 font-semibold text-gray-900">
                                Danger zone
                            </h2>
                            <p class="mt-1 text-sm leading-6 text-gray-500">
                                Manage your account settings. These actions cannot be undone.
                                <a href="#" class="inline-flex items-center gap-1 text-indigo-600 hover:underline
                                                  hover:underline-offset-4">
                                    Learn more
                                    <i class="pi pi-external-link size-4 shrink-0" aria-hidden="true"/>
                                </a>
                            </p>
                        </div>

                        <div class="space-y-6 md:col-span-2">
                            <!-- Card: Transfer Ownership -->
                            <div class="p-4 border border-gray-200 rounded-md">
                                <div class="flex items-start justify-between gap-10">
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-900">
                                            Transfer Account Ownership
                                        </h4>
                                        <p class="mt-2 text-sm leading-6 text-gray-500">
                                            Transfer your account ownership to another user. You will lose administrative privileges after the transfer.
                                        </p>
                                        <div class="mt-4">
                                            <h:outputLabel for="newOwnerEmail" value="New Owner's Email"
                                                           styleClass="block text-sm font-medium text-gray-700"/>
                                            <p:inputText id="newOwnerEmail"
                                                         placeholder="email@example.com"
                                                         styleClass="mt-1 w-full"/>
                                        </div>
                                    </div>
                                    <p:commandButton value="Transfer"
                                                     styleClass="ui-button-warning"
                                                     update="@form messages"
                                                     onclick="return confirm('Are you sure you want to transfer ownership? This action cannot be undone.')"/>
                                </div>
                            </div>

                            <!-- Card: Delete Account -->
                            <div class="overflow-hidden border border-gray-200 rounded-md">
                                <div class="p-4 flex items-start justify-between gap-10">
                                    <div>
                                        <h4 class="text-sm font-medium text-gray-900">
                                            Delete Account
                                        </h4>
                                        <p class="mt-2 text-sm leading-6 text-gray-500">
                                            Permanently delete your account and all associated data. This action cannot be undone.
                                        </p>
                                        <div class="mt-4">
                                            <h:outputLabel for="confirmDelete" value="Type 'DELETE' to confirm"
                                                           styleClass="block text-sm font-medium text-gray-700"/>
                                            <p:inputText id="confirmDelete"
                                                         placeholder="DELETE"
                                                         styleClass="mt-1 w-full"/>
                                        </div>
                                    </div>
                                    <p:commandButton value="Delete Account"
                                                     action="#{SettingsController.deleteAccount}"
                                                     update="@form messages"
                                                     styleClass="ui-button-danger"
                                                     onclick="return confirm('Are you absolutely sure you want to delete your account? This action cannot be undone.')"/>
                                </div>
                                <div class="border-t border-gray-200 bg-gray-50 p-4">
                                    <p class="text-sm text-gray-500">
                                        Note: Deleting your account will remove all your personal information and cannot be reversed.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </section>
        </div>
    </ui:define>
</ui:composition>
